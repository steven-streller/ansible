Vagrant.configure("2") do |config|
  config.vm.box = "generic/ubuntu2204"

  # --- Server A (Subnetz 1) ---
  config.vm.define "firewall" do |firewall|
    firewall.vm.hostname = "firewall"
    firewall.vm.network "private_network", ip: "192.168.121.20"
    
    firewall.vm.provider :libvirt do |lv|
      lv.memory = 2048
      lv.cpus = 2
    end

    firewall.vm.provision "ansible" do |ansible|
      ansible.playbook = "firewall.yml"
      ansible.compatibility_mode = "2.0"
      ansible.extra_vars = {
        ansible_python_interpreter: "/usr/bin/python3"
      }
    end
  end
end